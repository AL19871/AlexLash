{% extends "base.html" %}

{% block title %} Books {% endblock title %}

{% block main_body %}

<table class="table table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">name</th>
          <th scope="col">cost</th>
          <th scope="col">author</th>
          <th scope="col">seria</th>
          <th scope="col">genre</th>
          <th scope="col">year_of_publishing</th>
          <th scope="col">publisher</th>
          <th scope="col">amount</th>
          <th scope="col">active</th>
          <th scope="col">rating</th>
          <th scope="col">actions</th>
        </tr>
    </thead>
    <tbody>
    {% for book in object_list %}
        <tr>
            <td>{{ book.pk }}</td>
            <td><a href="{% url 'book-detail' book.pk %}">{{ book.name }}</a></td>
            <td>{{ book.cost }}</td>
            <td>{% for author in book.author.all %} {{ author }} {% endfor %}</td>
            {% if permission_seria_view == True %}
                <td><a href="{% url 'seria-detail' book.seria.pk %}">{{ book.seria }}</a></td>
            {% else %}
                <td>{{ book.seria }}</td>
            {% endif %}
            <td>{% for genre in book.genre.all %} {{ genre }} {% endfor %}</td>
            <td>{{ book.year_of_publishing }}</td>
            {% if permission_pub_view == True %}
                <td><a href="{% url 'publisher-detail' book.publisher.pk %}">{{ book.publisher }}</a></td>
            {% else %}
                <td>{{ book.publisher }}</td>
            {% endif %}
            <td>{{ book.amount }}</td>
            <td>{{ book.active }}</td>
            <td>{{ book.rating }}</td>
            <td>
            {% if permission_change == True %}
                <a href="{% url 'book-update' book.pk %}"><i class="far fa-edit"></i></a>
            {% endif %}
            {% if permission_delete == True %}
                <a href="{% url 'book-delete' book.pk %}"><i class="fas fa-trash"></i></a>
            {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% if permission_add == True %}
    <a href="{% url 'book-create' %}"><button type="button" class="btn btn-secondary">Add book</button></a>
{% endif %}
{% endblock main_body %}